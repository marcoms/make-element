const version='2.1.0';function noop(){}function identity(a){return a}function makeElement(a={}){const b=a.props;let c=!1,d=noop;'function'==typeof a.ready&&(d=a.ready);const e={},f={};for(const i of Object.keys(b)){const j=b[i];let k=null;j.init!==void 0&&(k=j.init);let l='string'==typeof j.attr,m=null;l&&(m=j.attr,f[m]={val:null,prop:i,needsPropagation:!0});let n=identity;'function'==typeof j.toAttr&&(n=j.toAttr);let o=identity;'function'==typeof j.fromAttr&&(o=j.fromAttr);let p=identity;'function'==typeof j.get&&(p=j.get);let q=noop;'function'==typeof j.set&&(q=j.set);let r=identity;'function'==typeof j.coerce&&(r=j.coerce),e[i]={val:k,attr:m,toAttr:n,fromAttr:o,get:p,set:q,coerce:r,hasSet:!1}}const g=Object.keys(f),h=class extends HTMLElement{constructor(){super(),d=d.bind(this);for(const l of Object.keys(e)){const m=e[l],n='string'==typeof m.attr,o=m.attr,p=f[o];m.toAttr=m.toAttr.bind(this),m.fromAttr=m.fromAttr.bind(this),m.get=m.get.bind(this),m.set=m.set.bind(this),m.coerce=m.coerce.bind(this),Object.defineProperty(this,l,{set(q){let r=q;m.settingInitialValue?m.settingInitialValue=!1:r=m.coerce(q),m.val=r,m.set(r);const s=!m.hasSet&&this.hasAttribute(o);if(n&&!s){const t=m.toAttr(r);p.needsPropagation=!1,this.setAttribute(o,t)}m.hasSet=!0},get(){const q=m.get(m.val);return q}})}const i='string'==typeof a.template,j='string'==typeof a.templateUrl;a.shadowDom&&this.attachShadow({mode:'open'});const k=l=>{this.$={};const m=l.querySelectorAll('[id]');for(const n of m)this.$[n.id]=n};i?a.shadowDom?this.shadowRoot.innerHTML=a.template:this.innerHTML=a.template:j&&fetch(a.templateUrl).then(l=>{if(l.ok)return l.text();throw new Error(`Couldn't fetch template at ${templateUrl}. `+`Got HTTP status code ${status}`)}).then(l=>{a.shadowDom?this.shadowRoot.innerHTML=l:this.innerHTML=l}),!1!==a.cacheIds&&(a.shadowDom?k(this.shadowRoot):k(this))}connectedCallback(){if(!c){for(const i of Object.keys(b)){const j=e[i];void 0===j.val||null===j.val||j.hasSet||(j.settingInitialValue=!0,this[i]=j.val)}d.call(this),c=!0}}attributeChangedCallback(i,j,k){if(k!==j){const l=f[i];if(l.val=k,l.needsPropagation){l.needsPropagation=!1;const m=l.prop,n=e[m],o=n.fromAttr(k);this[m]=o}}}static get observedAttributes(){return g}};for(const i of Object.keys(a.methods)){const j=a.methods[i];if('function'!=typeof j)throw new TypeError(`${i} must be a function (got ${j})`);h.prototype[i]=j}return h}const[versionMajor,versionMinor,versionPatch]=version.split('.');makeElement.version={major:Number.parseInt(versionMajor,10),minor:Number.parseInt(versionMinor,10),patch:Number.parseInt(versionPatch,10)};export default makeElement;
