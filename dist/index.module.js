function identity(a){return a}function noop(){}function makeElement(a={}){const b=a.props;let c=!1,d=noop;'function'==typeof a.ready&&(d=a.ready);const e={},f={};for(const i of Object.keys(b)){const j=b[i];let k=null;j.init!==void 0&&(k=j.init);let l='string'==typeof j.attr,m=null;l&&(m=j.attr,f[m]={val:null,prop:i,needsPropagation:!0});let n=identity;'function'==typeof j.toAttr&&(n=j.toAttr);let o=identity;'function'==typeof j.fromAttr&&(o=j.fromAttr);let p=identity;'function'==typeof j.get&&(p=j.get);let q=identity;'function'==typeof j.set&&(q=j.set),e[i]={val:k,attr:m,toAttr:n,fromAttr:o,get:p,set:q,hasSet:!1}}const g=Object.keys(f),h=class extends HTMLElement{constructor(){super(),d=d.bind(this);for(const k of Object.keys(e)){const l=e[k],m='string'==typeof l.attr,n=l.attr,o=f[n];l.toAttr=l.toAttr.bind(this),l.fromAttr=l.fromAttr.bind(this),l.get=l.get.bind(this),l.set=l.set.bind(this),Object.defineProperty(this,k,{set(p){const q=l.set(p);l.val=q;const r=!l.hasSet&&this.hasAttribute(n);if(m&&!r){const s=l.toAttr(q);o.needsPropagation=!1,this.setAttribute(n,s)}l.hasSet=!0},get(){const p=l.get(l.val);return p}})}const i='string'==typeof a.template,j='string'==typeof a.templateUrl;a.shadowDom&&this.attachShadow({mode:'open'}),i?a.shadowDom?this.shadowRoot.innerHTML=a.template:this.innerHTML=a.template:j&&fetch(a.templateUrl).then(k=>{if(k.ok)return k.text();throw new Error(`Couldn't fetch template at ${templateUrl}. `+`Got HTTP status code ${status}`)}).then(k=>{a.shadowDom?this.shadowRoot.innerHTML=k:this.innerHTML=k})}connectedCallback(){if(!c){for(const i of Object.keys(b)){const j=e[i];void 0===j.val||null===j.val||j.hasSet||(this[i]=j.val)}d.call(this),c=!0}}attributeChangedCallback(i,j,k){if(k!==j){const l=f[i],m=l.prop,n=e[m];if(l.val=k,l.needsPropagation){l.needsPropagation=!1;const o=n.fromAttr(k);this[m]=o}}}static get observedAttributes(){return g}};for(const i of Object.keys(a.methods)){const j=a.methods[i];if('function'!=typeof j)throw new TypeError(`${i} must be a function (got ${j})`);h.prototype[i]=j}return h}export default makeElement;
